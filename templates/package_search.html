{% extends 'base.html' %}

{% set nav = 'package' %}


{% block body %}

<form>
    <div class="ui fluid input">
        <input type="text" name="search" placeholder="Search CVE..." value="{{g.keyword}}">
    </div>
</form>

<div class="ui divider hidden"></div>

<div>
    <table class="ui very basic compact fixed table" style="vertical-align: top">
        <thead>
            <tr>
                <th class="two wide">Program</th>
                <th class="one wide">CVEs</th>
                <th class="three wide">Package</th>
                <th class="ten wide">Description</th>
            </tr>
        </thead>
    
    
        <script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>
    
        <tbody id="tablebody">
            {% for x in g.table %}
            <tr>
                <td>{{x.program_name}}</td>
                <td class="{{'negative' if x.cve_cnt}}"><a target="_blank" href="https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword={{x.program_name}}">{{x.cve_cnt or '0'}}</a></td>
                <td><a target="_blank" href="https://tracker.debian.org/pkg/{{x.package_name}}">{{x.package_name}}</a></td>
                <td>{{x.description}}</td>
            </tr>
            {% endfor %}
    
            {% if (g.table | length) == 200 %}
            <tr>
                <td>...</td>
                <td>...</td>
            </tr>
            {% endif %}
        </tbody>
    
        <script>
            new Mark(document.querySelector("#tablebody")).mark('{{g.keyword}}')
        </script>

        <style>
            mark{
                background: rgba(247, 194, 66, 0.2);;
                color: black;
            }
        </style>
    </table>
</div>

{% endblock %}